<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Cheryl" />

<meta name="date" content="2020-04-21" />

<title>TidyRtutorial</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Covid-19 Projects</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="covid19stats.html">Covid-19 Project</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">TidyRtutorial</h1>
<h4 class="author">Cheryl</h4>
<h4 class="date">21 April 2020</h4>

</div>


<p>Data wrangling with 'tidyr'</p>
<pre class="r"><code>library(tidyverse)

#wide format
gap_wide &lt;- readr::read_csv(&#39;https://raw.githubusercontent.com/OHI-Science/data-science-training/master/data/gapminder_wide.csv&#39;)</code></pre>
<pre><code>## Parsed with column specification:
## cols(
##   .default = col_double(),
##   continent = col_character(),
##   country = col_character()
## )</code></pre>
<pre><code>## See spec(...) for full column specifications.</code></pre>
<pre class="r"><code>#yesterday&#39;s format
gapminder &lt;- readr::read_csv(&#39;https://raw.githubusercontent.com/OHI-Science/data-science-training/master/data/gapminder.csv&#39;)</code></pre>
<pre><code>## Parsed with column specification:
## cols(
##   country = col_character(),
##   year = col_double(),
##   pop = col_double(),
##   continent = col_character(),
##   lifeExp = col_double(),
##   gdpPercap = col_double()
## )</code></pre>
<pre class="r"><code>head(gap_wide)</code></pre>
<pre><code>## # A tibble: 6 x 38
##   continent country gdpPercap_1952 gdpPercap_1957 gdpPercap_1962
##   &lt;chr&gt;     &lt;chr&gt;            &lt;dbl&gt;          &lt;dbl&gt;          &lt;dbl&gt;
## 1 Africa    Algeria          2449.          3014.          2551.
## 2 Africa    Angola           3521.          3828.          4269.
## 3 Africa    Benin            1063.           960.           949.
## 4 Africa    Botswa~           851.           918.           984.
## 5 Africa    Burkin~           543.           617.           723.
## 6 Africa    Burundi           339.           380.           355.
## # ... with 33 more variables: gdpPercap_1967 &lt;dbl&gt;, gdpPercap_1972 &lt;dbl&gt;,
## #   gdpPercap_1977 &lt;dbl&gt;, gdpPercap_1982 &lt;dbl&gt;, gdpPercap_1987 &lt;dbl&gt;,
## #   gdpPercap_1992 &lt;dbl&gt;, gdpPercap_1997 &lt;dbl&gt;, gdpPercap_2002 &lt;dbl&gt;,
## #   gdpPercap_2007 &lt;dbl&gt;, lifeExp_1952 &lt;dbl&gt;, lifeExp_1957 &lt;dbl&gt;,
## #   lifeExp_1962 &lt;dbl&gt;, lifeExp_1967 &lt;dbl&gt;, lifeExp_1972 &lt;dbl&gt;,
## #   lifeExp_1977 &lt;dbl&gt;, lifeExp_1982 &lt;dbl&gt;, lifeExp_1987 &lt;dbl&gt;,
## #   lifeExp_1992 &lt;dbl&gt;, lifeExp_1997 &lt;dbl&gt;, lifeExp_2002 &lt;dbl&gt;,
## #   lifeExp_2007 &lt;dbl&gt;, pop_1952 &lt;dbl&gt;, pop_1957 &lt;dbl&gt;, pop_1962 &lt;dbl&gt;,
## #   pop_1967 &lt;dbl&gt;, pop_1972 &lt;dbl&gt;, pop_1977 &lt;dbl&gt;, pop_1982 &lt;dbl&gt;,
## #   pop_1987 &lt;dbl&gt;, pop_1992 &lt;dbl&gt;, pop_1997 &lt;dbl&gt;, pop_2002 &lt;dbl&gt;,
## #   pop_2007 &lt;dbl&gt;</code></pre>
<pre class="r"><code>str(gap_wide)</code></pre>
<pre><code>## tibble [142 x 38] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
##  $ continent     : chr [1:142] &quot;Africa&quot; &quot;Africa&quot; &quot;Africa&quot; &quot;Africa&quot; ...
##  $ country       : chr [1:142] &quot;Algeria&quot; &quot;Angola&quot; &quot;Benin&quot; &quot;Botswana&quot; ...
##  $ gdpPercap_1952: num [1:142] 2449 3521 1063 851 543 ...
##  $ gdpPercap_1957: num [1:142] 3014 3828 960 918 617 ...
##  $ gdpPercap_1962: num [1:142] 2551 4269 949 984 723 ...
##  $ gdpPercap_1967: num [1:142] 3247 5523 1036 1215 795 ...
##  $ gdpPercap_1972: num [1:142] 4183 5473 1086 2264 855 ...
##  $ gdpPercap_1977: num [1:142] 4910 3009 1029 3215 743 ...
##  $ gdpPercap_1982: num [1:142] 5745 2757 1278 4551 807 ...
##  $ gdpPercap_1987: num [1:142] 5681 2430 1226 6206 912 ...
##  $ gdpPercap_1992: num [1:142] 5023 2628 1191 7954 932 ...
##  $ gdpPercap_1997: num [1:142] 4797 2277 1233 8647 946 ...
##  $ gdpPercap_2002: num [1:142] 5288 2773 1373 11004 1038 ...
##  $ gdpPercap_2007: num [1:142] 6223 4797 1441 12570 1217 ...
##  $ lifeExp_1952  : num [1:142] 43.1 30 38.2 47.6 32 ...
##  $ lifeExp_1957  : num [1:142] 45.7 32 40.4 49.6 34.9 ...
##  $ lifeExp_1962  : num [1:142] 48.3 34 42.6 51.5 37.8 ...
##  $ lifeExp_1967  : num [1:142] 51.4 36 44.9 53.3 40.7 ...
##  $ lifeExp_1972  : num [1:142] 54.5 37.9 47 56 43.6 ...
##  $ lifeExp_1977  : num [1:142] 58 39.5 49.2 59.3 46.1 ...
##  $ lifeExp_1982  : num [1:142] 61.4 39.9 50.9 61.5 48.1 ...
##  $ lifeExp_1987  : num [1:142] 65.8 39.9 52.3 63.6 49.6 ...
##  $ lifeExp_1992  : num [1:142] 67.7 40.6 53.9 62.7 50.3 ...
##  $ lifeExp_1997  : num [1:142] 69.2 41 54.8 52.6 50.3 ...
##  $ lifeExp_2002  : num [1:142] 71 41 54.4 46.6 50.6 ...
##  $ lifeExp_2007  : num [1:142] 72.3 42.7 56.7 50.7 52.3 ...
##  $ pop_1952      : num [1:142] 9279525 4232095 1738315 442308 4469979 ...
##  $ pop_1957      : num [1:142] 10270856 4561361 1925173 474639 4713416 ...
##  $ pop_1962      : num [1:142] 11000948 4826015 2151895 512764 4919632 ...
##  $ pop_1967      : num [1:142] 12760499 5247469 2427334 553541 5127935 ...
##  $ pop_1972      : num [1:142] 14760787 5894858 2761407 619351 5433886 ...
##  $ pop_1977      : num [1:142] 17152804 6162675 3168267 781472 5889574 ...
##  $ pop_1982      : num [1:142] 20033753 7016384 3641603 970347 6634596 ...
##  $ pop_1987      : num [1:142] 23254956 7874230 4243788 1151184 7586551 ...
##  $ pop_1992      : num [1:142] 26298373 8735988 4981671 1342614 8878303 ...
##  $ pop_1997      : num [1:142] 29072015 9875024 6066080 1536536 10352843 ...
##  $ pop_2002      : num [1:142] 31287142 10866106 7026113 1630347 12251209 ...
##  $ pop_2007      : num [1:142] 33333216 12420476 8078314 1639131 14326203 ...
##  - attr(*, &quot;spec&quot;)=
##   .. cols(
##   ..   continent = col_character(),
##   ..   country = col_character(),
##   ..   gdpPercap_1952 = col_double(),
##   ..   gdpPercap_1957 = col_double(),
##   ..   gdpPercap_1962 = col_double(),
##   ..   gdpPercap_1967 = col_double(),
##   ..   gdpPercap_1972 = col_double(),
##   ..   gdpPercap_1977 = col_double(),
##   ..   gdpPercap_1982 = col_double(),
##   ..   gdpPercap_1987 = col_double(),
##   ..   gdpPercap_1992 = col_double(),
##   ..   gdpPercap_1997 = col_double(),
##   ..   gdpPercap_2002 = col_double(),
##   ..   gdpPercap_2007 = col_double(),
##   ..   lifeExp_1952 = col_double(),
##   ..   lifeExp_1957 = col_double(),
##   ..   lifeExp_1962 = col_double(),
##   ..   lifeExp_1967 = col_double(),
##   ..   lifeExp_1972 = col_double(),
##   ..   lifeExp_1977 = col_double(),
##   ..   lifeExp_1982 = col_double(),
##   ..   lifeExp_1987 = col_double(),
##   ..   lifeExp_1992 = col_double(),
##   ..   lifeExp_1997 = col_double(),
##   ..   lifeExp_2002 = col_double(),
##   ..   lifeExp_2007 = col_double(),
##   ..   pop_1952 = col_double(),
##   ..   pop_1957 = col_double(),
##   ..   pop_1962 = col_double(),
##   ..   pop_1967 = col_double(),
##   ..   pop_1972 = col_double(),
##   ..   pop_1977 = col_double(),
##   ..   pop_1982 = col_double(),
##   ..   pop_1987 = col_double(),
##   ..   pop_1992 = col_double(),
##   ..   pop_1997 = col_double(),
##   ..   pop_2002 = col_double(),
##   ..   pop_2007 = col_double()
##   .. )</code></pre>
<pre class="r"><code># To transform the data into a long format
?gather

gap_long &lt;- gap_wide %&gt;% 
  gather(key = obstype_year,
         value = obs_values)

str(gap_long)</code></pre>
<pre><code>## tibble [5,396 x 2] (S3: tbl_df/tbl/data.frame)
##  $ obstype_year: chr [1:5396] &quot;continent&quot; &quot;continent&quot; &quot;continent&quot; &quot;continent&quot; ...
##  $ obs_values  : chr [1:5396] &quot;Africa&quot; &quot;Africa&quot; &quot;Africa&quot; &quot;Africa&quot; ...</code></pre>
<pre class="r"><code>head(gap_long)</code></pre>
<pre><code>## # A tibble: 6 x 2
##   obstype_year obs_values
##   &lt;chr&gt;        &lt;chr&gt;     
## 1 continent    Africa    
## 2 continent    Africa    
## 3 continent    Africa    
## 4 continent    Africa    
## 5 continent    Africa    
## 6 continent    Africa</code></pre>
<pre class="r"><code>tail(gap_long)</code></pre>
<pre><code>## # A tibble: 6 x 2
##   obstype_year obs_values
##   &lt;chr&gt;        &lt;chr&gt;     
## 1 pop_2007     9031088   
## 2 pop_2007     7554661   
## 3 pop_2007     71158647  
## 4 pop_2007     60776238  
## 5 pop_2007     20434176  
## 6 pop_2007     4115771</code></pre>
<pre class="r"><code>#give the program more information on which columns we want reshaped

gap_long &lt;- gap_wide %&gt;% 
  gather(key = obstype_year, 
         value = obs_values,
         dplyr::starts_with(&#39;pop&#39;),
         dplyr::starts_with(&#39;lifeExp&#39;),
         dplyr::starts_with(&#39;gdpPercap&#39;))# name all the old columns to be included into this single new column

str(gap_long)</code></pre>
<pre><code>## tibble [5,112 x 4] (S3: tbl_df/tbl/data.frame)
##  $ continent   : chr [1:5112] &quot;Africa&quot; &quot;Africa&quot; &quot;Africa&quot; &quot;Africa&quot; ...
##  $ country     : chr [1:5112] &quot;Algeria&quot; &quot;Angola&quot; &quot;Benin&quot; &quot;Botswana&quot; ...
##  $ obstype_year: chr [1:5112] &quot;pop_1952&quot; &quot;pop_1952&quot; &quot;pop_1952&quot; &quot;pop_1952&quot; ...
##  $ obs_values  : num [1:5112] 9279525 4232095 1738315 442308 4469979 ...</code></pre>
<pre class="r"><code>head(gap_long)</code></pre>
<pre><code>## # A tibble: 6 x 4
##   continent country      obstype_year obs_values
##   &lt;chr&gt;     &lt;chr&gt;        &lt;chr&gt;             &lt;dbl&gt;
## 1 Africa    Algeria      pop_1952        9279525
## 2 Africa    Angola       pop_1952        4232095
## 3 Africa    Benin        pop_1952        1738315
## 4 Africa    Botswana     pop_1952         442308
## 5 Africa    Burkina Faso pop_1952        4469979
## 6 Africa    Burundi      pop_1952        2445618</code></pre>
<pre class="r"><code>tail(gap_long)</code></pre>
<pre><code>## # A tibble: 6 x 4
##   continent country        obstype_year   obs_values
##   &lt;chr&gt;     &lt;chr&gt;          &lt;chr&gt;               &lt;dbl&gt;
## 1 Europe    Sweden         gdpPercap_2007     33860.
## 2 Europe    Switzerland    gdpPercap_2007     37506.
## 3 Europe    Turkey         gdpPercap_2007      8458.
## 4 Europe    United Kingdom gdpPercap_2007     33203.
## 5 Oceania   Australia      gdpPercap_2007     34435.
## 6 Oceania   New Zealand    gdpPercap_2007     25185.</code></pre>
<pre class="r"><code>?separate

gap_long &lt;- gap_wide %&gt;% 
  gather(key = obstype_year,
         value = obs_values,
         -continent, -country) %&gt;% 
  separate(obstype_year,
           into = c(&#39;obs_type&#39;, &#39;year&#39;),
           sep = &quot;_&quot;,
           convert = TRUE) #this ensures that the year column is an integer rather than a character

str(gap_long)</code></pre>
<pre><code>## tibble [5,112 x 5] (S3: tbl_df/tbl/data.frame)
##  $ continent : chr [1:5112] &quot;Africa&quot; &quot;Africa&quot; &quot;Africa&quot; &quot;Africa&quot; ...
##  $ country   : chr [1:5112] &quot;Algeria&quot; &quot;Angola&quot; &quot;Benin&quot; &quot;Botswana&quot; ...
##  $ obs_type  : chr [1:5112] &quot;gdpPercap&quot; &quot;gdpPercap&quot; &quot;gdpPercap&quot; &quot;gdpPercap&quot; ...
##  $ year      : int [1:5112] 1952 1952 1952 1952 1952 1952 1952 1952 1952 1952 ...
##  $ obs_values: num [1:5112] 2449 3521 1063 851 543 ...</code></pre>
<pre class="r"><code>head(gap_long)</code></pre>
<pre><code>## # A tibble: 6 x 5
##   continent country      obs_type   year obs_values
##   &lt;chr&gt;     &lt;chr&gt;        &lt;chr&gt;     &lt;int&gt;      &lt;dbl&gt;
## 1 Africa    Algeria      gdpPercap  1952      2449.
## 2 Africa    Angola       gdpPercap  1952      3521.
## 3 Africa    Benin        gdpPercap  1952      1063.
## 4 Africa    Botswana     gdpPercap  1952       851.
## 5 Africa    Burkina Faso gdpPercap  1952       543.
## 6 Africa    Burundi      gdpPercap  1952       339.</code></pre>
<pre class="r"><code>tail(gap_long)</code></pre>
<pre><code>## # A tibble: 6 x 5
##   continent country        obs_type  year obs_values
##   &lt;chr&gt;     &lt;chr&gt;          &lt;chr&gt;    &lt;int&gt;      &lt;dbl&gt;
## 1 Europe    Sweden         pop       2007    9031088
## 2 Europe    Switzerland    pop       2007    7554661
## 3 Europe    Turkey         pop       2007   71158647
## 4 Europe    United Kingdom pop       2007   60776238
## 5 Oceania   Australia      pop       2007   20434176
## 6 Oceania   New Zealand    pop       2007    4115771</code></pre>
<pre class="r"><code>#plotting long format data with ggplot2, just Canada&#39;s data
canada_df &lt;- gap_long %&gt;% 
  filter(obs_type == &quot;lifeExp&quot;,
         country == &quot;Canada&quot;)
ggplot(canada_df, aes( x= year, y = obs_values))+
  geom_line()</code></pre>
<p><img src="tidyrtutorial_files/figure-html/unnamed-chunk-1-1.png" width="672" /></p>
<pre class="r"><code>#look at all countries in the Americas

life_df &lt;- gap_long %&gt;% 
  filter(obs_type == &quot;lifeExp&quot;,
         continent == &quot;Americas&quot;)
ggplot(life_df, aes( x = year, y = obs_values, color = country)) +
  geom_line()</code></pre>
<p><img src="tidyrtutorial_files/figure-html/unnamed-chunk-1-2.png" width="672" /></p>
<p>Using gap_long, calcuate the mean life expectancy for each continet from 1982 to 2007 over time.</p>
<pre class="r"><code>continents &lt;- gap_long %&gt;% 
  filter(obs_type == &quot;lifeExp&quot;,
         year &gt; 1981) %&gt;% 
  group_by(continent, year) %&gt;% 
  summarize(mean_le = mean(obs_values)) %&gt;% 
  ungroup()
continents #check</code></pre>
<pre><code>## # A tibble: 30 x 3
##    continent  year mean_le
##    &lt;chr&gt;     &lt;int&gt;   &lt;dbl&gt;
##  1 Africa     1982    51.6
##  2 Africa     1987    53.3
##  3 Africa     1992    53.6
##  4 Africa     1997    53.6
##  5 Africa     2002    53.3
##  6 Africa     2007    54.8
##  7 Americas   1982    66.2
##  8 Americas   1987    68.1
##  9 Americas   1992    69.6
## 10 Americas   1997    71.2
## # ... with 20 more rows</code></pre>
<pre class="r"><code>ggplot(data = continents, aes(x = year, y = mean_le, color = continent)) +
  geom_line()+
  labs(title = &quot;Mean Life Expectancy&quot;,
       x = &quot;Year&quot;,
       y = &quot;Age (years)&quot;,
       color = &quot;Continent&quot;)+
  theme_classic()+
  scale_fill_brewer(palette = &quot;Blues&quot;)</code></pre>
<p><img src="tidyrtutorial_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<p>Using spread() to put our data back into wide format</p>
<pre class="r"><code>gap_normal &lt;- gap_long %&gt;% 
  spread(obs_type, obs_values)
# check

dim(gap_normal)</code></pre>
<pre><code>## [1] 1704    6</code></pre>
<pre class="r"><code>dim(gapminder)</code></pre>
<pre><code>## [1] 1704    6</code></pre>
<pre class="r"><code>names(gap_normal)</code></pre>
<pre><code>## [1] &quot;continent&quot; &quot;country&quot;   &quot;year&quot;      &quot;gdpPercap&quot; &quot;lifeExp&quot;   &quot;pop&quot;</code></pre>
<pre class="r"><code>names(gapminder)</code></pre>
<pre><code>## [1] &quot;country&quot;   &quot;year&quot;      &quot;pop&quot;       &quot;continent&quot; &quot;lifeExp&quot;   &quot;gdpPercap&quot;</code></pre>
<pre class="r"><code>#now my df for gap_normal is the same as gapminder</code></pre>
<p>Next, convert gap_long all the way back to gap_wide</p>
<pre class="r"><code>head(gap_long)#remember the columns</code></pre>
<pre><code>## # A tibble: 6 x 5
##   continent country      obs_type   year obs_values
##   &lt;chr&gt;     &lt;chr&gt;        &lt;chr&gt;     &lt;int&gt;      &lt;dbl&gt;
## 1 Africa    Algeria      gdpPercap  1952      2449.
## 2 Africa    Angola       gdpPercap  1952      3521.
## 3 Africa    Benin        gdpPercap  1952      1063.
## 4 Africa    Botswana     gdpPercap  1952       851.
## 5 Africa    Burkina Faso gdpPercap  1952       543.
## 6 Africa    Burundi      gdpPercap  1952       339.</code></pre>
<pre class="r"><code>gap_wide_new &lt;- gap_long %&gt;% 
  
#first unite obs_type and year into a new column called var_names, separate by _
unite(col = var_names,obs_type, year, sep = &quot;_&quot;) %&gt;% 
#then spread var_names out by key-value pair
spread(key = var_names, value = obs_values)

str(gap_wide_new)</code></pre>
<pre><code>## tibble [142 x 38] (S3: tbl_df/tbl/data.frame)
##  $ continent     : chr [1:142] &quot;Africa&quot; &quot;Africa&quot; &quot;Africa&quot; &quot;Africa&quot; ...
##  $ country       : chr [1:142] &quot;Algeria&quot; &quot;Angola&quot; &quot;Benin&quot; &quot;Botswana&quot; ...
##  $ gdpPercap_1952: num [1:142] 2449 3521 1063 851 543 ...
##  $ gdpPercap_1957: num [1:142] 3014 3828 960 918 617 ...
##  $ gdpPercap_1962: num [1:142] 2551 4269 949 984 723 ...
##  $ gdpPercap_1967: num [1:142] 3247 5523 1036 1215 795 ...
##  $ gdpPercap_1972: num [1:142] 4183 5473 1086 2264 855 ...
##  $ gdpPercap_1977: num [1:142] 4910 3009 1029 3215 743 ...
##  $ gdpPercap_1982: num [1:142] 5745 2757 1278 4551 807 ...
##  $ gdpPercap_1987: num [1:142] 5681 2430 1226 6206 912 ...
##  $ gdpPercap_1992: num [1:142] 5023 2628 1191 7954 932 ...
##  $ gdpPercap_1997: num [1:142] 4797 2277 1233 8647 946 ...
##  $ gdpPercap_2002: num [1:142] 5288 2773 1373 11004 1038 ...
##  $ gdpPercap_2007: num [1:142] 6223 4797 1441 12570 1217 ...
##  $ lifeExp_1952  : num [1:142] 43.1 30 38.2 47.6 32 ...
##  $ lifeExp_1957  : num [1:142] 45.7 32 40.4 49.6 34.9 ...
##  $ lifeExp_1962  : num [1:142] 48.3 34 42.6 51.5 37.8 ...
##  $ lifeExp_1967  : num [1:142] 51.4 36 44.9 53.3 40.7 ...
##  $ lifeExp_1972  : num [1:142] 54.5 37.9 47 56 43.6 ...
##  $ lifeExp_1977  : num [1:142] 58 39.5 49.2 59.3 46.1 ...
##  $ lifeExp_1982  : num [1:142] 61.4 39.9 50.9 61.5 48.1 ...
##  $ lifeExp_1987  : num [1:142] 65.8 39.9 52.3 63.6 49.6 ...
##  $ lifeExp_1992  : num [1:142] 67.7 40.6 53.9 62.7 50.3 ...
##  $ lifeExp_1997  : num [1:142] 69.2 41 54.8 52.6 50.3 ...
##  $ lifeExp_2002  : num [1:142] 71 41 54.4 46.6 50.6 ...
##  $ lifeExp_2007  : num [1:142] 72.3 42.7 56.7 50.7 52.3 ...
##  $ pop_1952      : num [1:142] 9279525 4232095 1738315 442308 4469979 ...
##  $ pop_1957      : num [1:142] 10270856 4561361 1925173 474639 4713416 ...
##  $ pop_1962      : num [1:142] 11000948 4826015 2151895 512764 4919632 ...
##  $ pop_1967      : num [1:142] 12760499 5247469 2427334 553541 5127935 ...
##  $ pop_1972      : num [1:142] 14760787 5894858 2761407 619351 5433886 ...
##  $ pop_1977      : num [1:142] 17152804 6162675 3168267 781472 5889574 ...
##  $ pop_1982      : num [1:142] 20033753 7016384 3641603 970347 6634596 ...
##  $ pop_1987      : num [1:142] 23254956 7874230 4243788 1151184 7586551 ...
##  $ pop_1992      : num [1:142] 26298373 8735988 4981671 1342614 8878303 ...
##  $ pop_1997      : num [1:142] 29072015 9875024 6066080 1536536 10352843 ...
##  $ pop_2002      : num [1:142] 31287142 10866106 7026113 1630347 12251209 ...
##  $ pop_2007      : num [1:142] 33333216 12420476 8078314 1639131 14326203 ...</code></pre>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>

<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Cheryl" />

<meta name="date" content="2020-04-15" />

<title>dplyr tutorial</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Covid-19 Projects</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="covid19stats.html">Covid-19 Project</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">dplyr tutorial</h1>
<h4 class="author">Cheryl</h4>
<h4 class="date">15 April 2020</h4>

</div>


<pre class="r"><code>library(tidyverse)</code></pre>
<pre><code>## Warning: package &#39;tidyverse&#39; was built under R version 3.5.3</code></pre>
<pre><code>## -- Attaching packages -------------------- tidyverse 1.3.0 --</code></pre>
<pre><code>## v tibble  3.0.1     v stringr 1.4.0
## v readr   1.3.1     v forcats 0.4.0
## v purrr   0.3.3</code></pre>
<pre><code>## Warning: package &#39;tibble&#39; was built under R version 3.5.3</code></pre>
<pre><code>## Warning: package &#39;readr&#39; was built under R version 3.5.3</code></pre>
<pre><code>## Warning: package &#39;purrr&#39; was built under R version 3.5.3</code></pre>
<pre><code>## Warning: package &#39;stringr&#39; was built under R version 3.5.3</code></pre>
<pre><code>## Warning: package &#39;forcats&#39; was built under R version 3.5.3</code></pre>
<pre><code>## -- Conflicts ----------------------- tidyverse_conflicts() --
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<pre class="r"><code>gapminder &lt;- readr::read_csv(&quot;https://raw.githubusercontent.com/OHI-Science/data-science-training/master/data/gapminder.csv&quot;)</code></pre>
<pre><code>## Parsed with column specification:
## cols(
##   country = col_character(),
##   year = col_double(),
##   pop = col_double(),
##   continent = col_character(),
##   lifeExp = col_double(),
##   gdpPercap = col_double()
## )</code></pre>
<pre class="r"><code>head(gapminder)</code></pre>
<pre><code>## # A tibble: 6 x 6
##   country      year      pop continent lifeExp gdpPercap
##   &lt;chr&gt;       &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt;     &lt;dbl&gt;
## 1 Afghanistan  1952  8425333 Asia         28.8      779.
## 2 Afghanistan  1957  9240934 Asia         30.3      821.
## 3 Afghanistan  1962 10267083 Asia         32.0      853.
## 4 Afghanistan  1967 11537966 Asia         34.0      836.
## 5 Afghanistan  1972 13079460 Asia         36.1      740.
## 6 Afghanistan  1977 14880372 Asia         38.4      786.</code></pre>
<pre class="r"><code>tail(gapminder)</code></pre>
<pre><code>## # A tibble: 6 x 6
##   country   year      pop continent lifeExp gdpPercap
##   &lt;chr&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt;     &lt;dbl&gt;
## 1 Zimbabwe  1982  7636524 Africa       60.4      789.
## 2 Zimbabwe  1987  9216418 Africa       62.4      706.
## 3 Zimbabwe  1992 10704340 Africa       60.4      693.
## 4 Zimbabwe  1997 11404948 Africa       46.8      792.
## 5 Zimbabwe  2002 11926563 Africa       40.0      672.
## 6 Zimbabwe  2007 12311143 Africa       43.5      470.</code></pre>
<pre class="r"><code>head(gapminder,10)#shows first time I indicate</code></pre>
<pre><code>## # A tibble: 10 x 6
##    country      year      pop continent lifeExp gdpPercap
##    &lt;chr&gt;       &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt;     &lt;dbl&gt;
##  1 Afghanistan  1952  8425333 Asia         28.8      779.
##  2 Afghanistan  1957  9240934 Asia         30.3      821.
##  3 Afghanistan  1962 10267083 Asia         32.0      853.
##  4 Afghanistan  1967 11537966 Asia         34.0      836.
##  5 Afghanistan  1972 13079460 Asia         36.1      740.
##  6 Afghanistan  1977 14880372 Asia         38.4      786.
##  7 Afghanistan  1982 12881816 Asia         39.9      978.
##  8 Afghanistan  1987 13867957 Asia         40.8      852.
##  9 Afghanistan  1992 16317921 Asia         41.7      649.
## 10 Afghanistan  1997 22227415 Asia         41.8      635.</code></pre>
<pre class="r"><code>str(gapminder)</code></pre>
<pre><code>## tibble [1,704 x 6] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
##  $ country  : chr [1:1704] &quot;Afghanistan&quot; &quot;Afghanistan&quot; &quot;Afghanistan&quot; &quot;Afghanistan&quot; ...
##  $ year     : num [1:1704] 1952 1957 1962 1967 1972 ...
##  $ pop      : num [1:1704] 8425333 9240934 10267083 11537966 13079460 ...
##  $ continent: chr [1:1704] &quot;Asia&quot; &quot;Asia&quot; &quot;Asia&quot; &quot;Asia&quot; ...
##  $ lifeExp  : num [1:1704] 28.8 30.3 32 34 36.1 ...
##  $ gdpPercap: num [1:1704] 779 821 853 836 740 ...
##  - attr(*, &quot;spec&quot;)=
##   .. cols(
##   ..   country = col_character(),
##   ..   year = col_double(),
##   ..   pop = col_double(),
##   ..   continent = col_character(),
##   ..   lifeExp = col_double(),
##   ..   gdpPercap = col_double()
##   .. )</code></pre>
<pre class="r"><code>names(gapminder)</code></pre>
<pre><code>## [1] &quot;country&quot;   &quot;year&quot;      &quot;pop&quot;       &quot;continent&quot; &quot;lifeExp&quot;   &quot;gdpPercap&quot;</code></pre>
<pre class="r"><code>summary(gapminder)</code></pre>
<pre><code>##    country               year           pop             continent        
##  Length:1704        Min.   :1952   Min.   :6.001e+04   Length:1704       
##  Class :character   1st Qu.:1966   1st Qu.:2.794e+06   Class :character  
##  Mode  :character   Median :1980   Median :7.024e+06   Mode  :character  
##                     Mean   :1980   Mean   :2.960e+07                     
##                     3rd Qu.:1993   3rd Qu.:1.959e+07                     
##                     Max.   :2007   Max.   :1.319e+09                     
##     lifeExp        gdpPercap       
##  Min.   :23.60   Min.   :   241.2  
##  1st Qu.:48.20   1st Qu.:  1202.1  
##  Median :60.71   Median :  3531.8  
##  Mean   :59.47   Mean   :  7215.3  
##  3rd Qu.:70.85   3rd Qu.:  9325.5  
##  Max.   :82.60   Max.   :113523.1</code></pre>
<div id="to-specify-a-single-variable-from-a-data-frame" class="section level1">
<h1>to specify a single variable from a data frame</h1>
<pre class="r"><code>head(gapminder$lifeExp)</code></pre>
<pre><code>## [1] 28.801 30.332 31.997 34.020 36.088 38.438</code></pre>
<pre class="r"><code>str(gapminder$lifeExp)</code></pre>
<pre><code>##  num [1:1704] 28.8 30.3 32 34 36.1 ...</code></pre>
<pre class="r"><code>summary(gapminder$lifeExp)</code></pre>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   23.60   48.20   60.71   59.47   70.85   82.60</code></pre>
<pre class="r"><code>dim(gapminder)</code></pre>
<pre><code>## [1] 1704    6</code></pre>
</div>
<div id="dplyr-functions" class="section level1">
<h1>dplyr functions</h1>
</div>
<div id="filter-for-rowsobservations" class="section level1">
<h1>filter for rows/observations</h1>
</div>
<div id="select-for-columnsvariables" class="section level1">
<h1>select for columns/variables</h1>
</div>
<div id="mutate-for-creating-new-variables" class="section level1">
<h1>mutate for creating new variables</h1>
</div>
<div id="summarise-for-collapsing-values-into-a-single-summary" class="section level1">
<h1>summarise for collapsing values into a single summary</h1>
</div>
<div id="arrange-for-reordering-rows" class="section level1">
<h1>arrange for reordering rows</h1>
</div>
<div id="groupby" class="section level1">
<h1>groupby</h1>
<pre class="r"><code>#to subset observations, filter gapminder data for life expetancy less than 29
filter(gapminder, lifeExp &lt; 29)</code></pre>
<pre><code>## # A tibble: 2 x 6
##   country      year     pop continent lifeExp gdpPercap
##   &lt;chr&gt;       &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt;     &lt;dbl&gt;
## 1 Afghanistan  1952 8425333 Asia         28.8      779.
## 2 Rwanda       1992 7290203 Africa       23.6      737.</code></pre>
<pre class="r"><code>#filter the gapminder data for the country mexico
filter(gapminder, country == &quot;Mexico&quot;)</code></pre>
<pre><code>## # A tibble: 12 x 6
##    country  year       pop continent lifeExp gdpPercap
##    &lt;chr&gt;   &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt;     &lt;dbl&gt;
##  1 Mexico   1952  30144317 Americas     50.8     3478.
##  2 Mexico   1957  35015548 Americas     55.2     4132.
##  3 Mexico   1962  41121485 Americas     58.3     4582.
##  4 Mexico   1967  47995559 Americas     60.1     5755.
##  5 Mexico   1972  55984294 Americas     62.4     6809.
##  6 Mexico   1977  63759976 Americas     65.0     7675.
##  7 Mexico   1982  71640904 Americas     67.4     9611.
##  8 Mexico   1987  80122492 Americas     69.5     8688.
##  9 Mexico   1992  88111030 Americas     71.5     9472.
## 10 Mexico   1997  95895146 Americas     73.7     9767.
## 11 Mexico   2002 102479927 Americas     74.9    10742.
## 12 Mexico   2007 108700891 Americas     76.2    11978.</code></pre>
<pre class="r"><code># use the %in% (shift ctrl m) to filter for more than one country
filter(gapminder, country %in% c(&quot;Mexico&quot;, &quot;Peru&quot;))</code></pre>
<pre><code>## # A tibble: 24 x 6
##    country  year      pop continent lifeExp gdpPercap
##    &lt;chr&gt;   &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt;     &lt;dbl&gt;
##  1 Mexico   1952 30144317 Americas     50.8     3478.
##  2 Mexico   1957 35015548 Americas     55.2     4132.
##  3 Mexico   1962 41121485 Americas     58.3     4582.
##  4 Mexico   1967 47995559 Americas     60.1     5755.
##  5 Mexico   1972 55984294 Americas     62.4     6809.
##  6 Mexico   1977 63759976 Americas     65.0     7675.
##  7 Mexico   1982 71640904 Americas     67.4     9611.
##  8 Mexico   1987 80122492 Americas     69.5     8688.
##  9 Mexico   1992 88111030 Americas     71.5     9472.
## 10 Mexico   1997 95895146 Americas     73.7     9767.
## # ... with 14 more rows</code></pre>
<pre class="r"><code># mexico in 2002
filter(gapminder, country == &quot;Mexico&quot;, year ==2002)</code></pre>
<pre><code>## # A tibble: 1 x 6
##   country  year       pop continent lifeExp gdpPercap
##   &lt;chr&gt;   &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt;     &lt;dbl&gt;
## 1 Mexico   2002 102479927 Americas     74.9    10742.</code></pre>
<pre class="r"><code>#Average life expectancy in Brazil b/w 1987 and 2007
x &lt;- filter(gapminder, country == &quot;Brazil&quot;, year &gt; 1986)
mean(x$lifeExp)</code></pre>
<pre><code>## [1] 69.0092</code></pre>
<pre class="r"><code>#select multiple columns with a comma after specifying the data frame ( gapminder)

select(gapminder, year, country, lifeExp)</code></pre>
<pre><code>## # A tibble: 1,704 x 3
##     year country     lifeExp
##    &lt;dbl&gt; &lt;chr&gt;         &lt;dbl&gt;
##  1  1952 Afghanistan    28.8
##  2  1957 Afghanistan    30.3
##  3  1962 Afghanistan    32.0
##  4  1967 Afghanistan    34.0
##  5  1972 Afghanistan    36.1
##  6  1977 Afghanistan    38.4
##  7  1982 Afghanistan    39.9
##  8  1987 Afghanistan    40.8
##  9  1992 Afghanistan    41.7
## 10  1997 Afghanistan    41.8
## # ... with 1,694 more rows</code></pre>
<pre class="r"><code># or use select to DEselect columns too
select(gapminder, -continent, -lifeExp)</code></pre>
<pre><code>## # A tibble: 1,704 x 4
##    country      year      pop gdpPercap
##    &lt;chr&gt;       &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
##  1 Afghanistan  1952  8425333      779.
##  2 Afghanistan  1957  9240934      821.
##  3 Afghanistan  1962 10267083      853.
##  4 Afghanistan  1967 11537966      836.
##  5 Afghanistan  1972 13079460      740.
##  6 Afghanistan  1977 14880372      786.
##  7 Afghanistan  1982 12881816      978.
##  8 Afghanistan  1987 13867957      852.
##  9 Afghanistan  1992 16317921      649.
## 10 Afghanistan  1997 22227415      635.
## # ... with 1,694 more rows</code></pre>
<pre class="r"><code># filter for Cambodia, remove continent and lifeExp by using filter and select
gap_cambodia &lt;- filter(gapminder, country ==&quot;Cambodia&quot;)
gap_cambodia2 &lt;- select(gap_cambodia, -continent, -lifeExp)

gap_cambodia2</code></pre>
<pre><code>## # A tibble: 12 x 4
##    country   year      pop gdpPercap
##    &lt;chr&gt;    &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
##  1 Cambodia  1952  4693836      368.
##  2 Cambodia  1957  5322536      434.
##  3 Cambodia  1962  6083619      497.
##  4 Cambodia  1967  6960067      523.
##  5 Cambodia  1972  7450606      422.
##  6 Cambodia  1977  6978607      525.
##  7 Cambodia  1982  7272485      624.
##  8 Cambodia  1987  8371791      684.
##  9 Cambodia  1992 10150094      682.
## 10 Cambodia  1997 11782962      734.
## 11 Cambodia  2002 12926707      896.
## 12 Cambodia  2007 14131858     1714.</code></pre>
<pre class="r"><code>#or I can use the %&gt;% function
gap_cambodia &lt;- gapminder %&gt;% 
  filter(country == &quot;Cambodia&quot;) %&gt;% 
  select(-continent, -lifeExp)</code></pre>
<pre class="r"><code>#Use piping function instead of subsetting manually
# To see the first 3 rows of Gapminder, we can say
head(gapminder, 3)</code></pre>
<pre><code>## # A tibble: 3 x 6
##   country      year      pop continent lifeExp gdpPercap
##   &lt;chr&gt;       &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt;     &lt;dbl&gt;
## 1 Afghanistan  1952  8425333 Asia         28.8      779.
## 2 Afghanistan  1957  9240934 Asia         30.3      821.
## 3 Afghanistan  1962 10267083 Asia         32.0      853.</code></pre>
<pre class="r"><code>#0R
gapminder %&gt;% head(3)</code></pre>
<pre><code>## # A tibble: 3 x 6
##   country      year      pop continent lifeExp gdpPercap
##   &lt;chr&gt;       &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt;     &lt;dbl&gt;
## 1 Afghanistan  1952  8425333 Asia         28.8      779.
## 2 Afghanistan  1957  9240934 Asia         30.3      821.
## 3 Afghanistan  1962 10267083 Asia         32.0      853.</code></pre>
<pre class="r"><code>#mutate adds new variables or adds a new column to your data frame

#to calculate the country&#39;s gdp
head(gapminder)</code></pre>
<pre><code>## # A tibble: 6 x 6
##   country      year      pop continent lifeExp gdpPercap
##   &lt;chr&gt;       &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt;     &lt;dbl&gt;
## 1 Afghanistan  1952  8425333 Asia         28.8      779.
## 2 Afghanistan  1957  9240934 Asia         30.3      821.
## 3 Afghanistan  1962 10267083 Asia         32.0      853.
## 4 Afghanistan  1967 11537966 Asia         34.0      836.
## 5 Afghanistan  1972 13079460 Asia         36.1      740.
## 6 Afghanistan  1977 14880372 Asia         38.4      786.</code></pre>
<pre class="r"><code>gapminder %&gt;%
  mutate(gdp = pop*gdpPercap) %&gt;% 
select(country, gdp) # this cleans up the dataframe</code></pre>
<pre><code>## # A tibble: 1,704 x 2
##    country              gdp
##    &lt;chr&gt;              &lt;dbl&gt;
##  1 Afghanistan  6567086330.
##  2 Afghanistan  7585448670.
##  3 Afghanistan  8758855797.
##  4 Afghanistan  9648014150.
##  5 Afghanistan  9678553274.
##  6 Afghanistan 11697659231.
##  7 Afghanistan 12598563401.
##  8 Afghanistan 11820990309.
##  9 Afghanistan 10595901589.
## 10 Afghanistan 14121995875.
## # ... with 1,694 more rows</code></pre>
<pre class="r"><code>#Calculate the population in thousands for all Asian countries in the year 2007 and add it as a new column.

gapminder %&gt;% 
  filter(continent == &quot;Asia&quot;,
         year == 2007) %&gt;% 
  mutate(pop_thousands = pop/1000) %&gt;% 
  select(country, year, pop_thousands) # this cleans up the dataframe but isn&#39;t necessary</code></pre>
<pre><code>## # A tibble: 33 x 3
##    country          year pop_thousands
##    &lt;chr&gt;           &lt;dbl&gt;         &lt;dbl&gt;
##  1 Afghanistan      2007        31890.
##  2 Bahrain          2007          709.
##  3 Bangladesh       2007       150448.
##  4 Cambodia         2007        14132.
##  5 China            2007      1318683.
##  6 Hong Kong China  2007         6980.
##  7 India            2007      1110396.
##  8 Indonesia        2007       223547 
##  9 Iran             2007        69454.
## 10 Iraq             2007        27500.
## # ... with 23 more rows</code></pre>
<pre class="r"><code># grouping variable
#What if we wanted to know the total population on each continent in 2002? 

gapminder %&gt;% 
  filter(year == 2002) %&gt;%
  group_by(continent) %&gt;% # add up all country populations by their associated continents
  mutate(cont_pop = sum(pop))#creates a new column called cont_pop</code></pre>
<pre><code>## # A tibble: 142 x 7
## # Groups:   continent [5]
##    country      year       pop continent lifeExp gdpPercap   cont_pop
##    &lt;chr&gt;       &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;
##  1 Afghanistan  2002  25268405 Asia         42.1      727. 3601802203
##  2 Albania      2002   3508512 Europe       75.7     4604.  578223869
##  3 Algeria      2002  31287142 Africa       71.0     5288.  833723916
##  4 Angola       2002  10866106 Africa       41.0     2773.  833723916
##  5 Argentina    2002  38331121 Americas     74.3     8798.  849772762
##  6 Australia    2002  19546792 Oceania      80.4    30688.   23454829
##  7 Austria      2002   8148312 Europe       79.0    32418.  578223869
##  8 Bahrain      2002    656397 Asia         74.8    23404. 3601802203
##  9 Bangladesh   2002 135656790 Asia         62.0     1136. 3601802203
## 10 Belgium      2002  10311970 Europe       78.3    30486.  578223869
## # ... with 132 more rows</code></pre>
<pre class="r"><code># now we want only columns showing continent and their population in 2002
# use summarize or group_by function
gapminder %&gt;% 
  group_by(continent) %&gt;% 
  summarize(cont_pop = sum(pop)) %&gt;% #summarize groups only columns we want
  ungroup()</code></pre>
<pre><code>## # A tibble: 5 x 2
##   continent     cont_pop
##   &lt;chr&gt;            &lt;dbl&gt;
## 1 Africa     6187585961 
## 2 Americas   7351438499 
## 3 Asia      30507333902.
## 4 Europe     6181115304 
## 5 Oceania     212992136</code></pre>
<pre class="r"><code>#to use more than 1 grouping variable

gapminder %&gt;% 
  group_by(continent, year) %&gt;% 
  summarize(cont_pop = sum(pop)) %&gt;% 
  arrange(year)#arrange function orders columns</code></pre>
<pre><code>## # A tibble: 60 x 3
## # Groups:   continent [5]
##    continent  year    cont_pop
##    &lt;chr&gt;     &lt;dbl&gt;       &lt;dbl&gt;
##  1 Africa     1952  237640501 
##  2 Americas   1952  345152446 
##  3 Asia       1952 1395357352.
##  4 Europe     1952  418120846 
##  5 Oceania    1952   10686006 
##  6 Africa     1957  264837738 
##  7 Americas   1957  386953916 
##  8 Asia       1957 1562780599 
##  9 Europe     1957  437890351 
## 10 Oceania    1957   11941976 
## # ... with 50 more rows</code></pre>
<pre class="r"><code>#What is the maximum GDP per continent across all years?
gapminder %&gt;% 
  mutate(gdp = pop*gdpPercap ) %&gt;% 
  group_by(continent) %&gt;% 
  mutate(max_gdp = max(gdp)) %&gt;% 
  filter(gdp == max_gdp) %&gt;% 
  select(continent, gdp)</code></pre>
<pre><code>## # A tibble: 5 x 2
## # Groups:   continent [5]
##   continent     gdp
##   &lt;chr&gt;       &lt;dbl&gt;
## 1 Oceania   7.04e11
## 2 Asia      6.54e12
## 3 Africa    4.48e11
## 4 Europe    2.65e12
## 5 Americas  1.29e13</code></pre>
<pre class="r"><code>#arrange the df in descending order
?arrange</code></pre>
<pre><code>## starting httpd help server ... done</code></pre>
<pre class="r"><code>gapminder %&gt;% 
  group_by(continent,year) %&gt;% 
  summarize(cont_pop = sum(pop)) %&gt;% 
  arrange(desc(year)) %&gt;% 
 ungroup()</code></pre>
<pre><code>## # A tibble: 60 x 3
##    continent  year   cont_pop
##    &lt;chr&gt;     &lt;dbl&gt;      &lt;dbl&gt;
##  1 Africa     2007  929539692
##  2 Americas   2007  898871184
##  3 Asia       2007 3811953827
##  4 Europe     2007  586098529
##  5 Oceania    2007   24549947
##  6 Africa     2002  833723916
##  7 Americas   2002  849772762
##  8 Asia       2002 3601802203
##  9 Europe     2002  578223869
## 10 Oceania    2002   23454829
## # ... with 50 more rows</code></pre>
<pre class="r"><code>#Find the maximum life capacity for countries in Asia

asia_life_exp &lt;- gapminder %&gt;% 
  filter(continent == &#39;Asia&#39;) %&gt;% 
  group_by(country) %&gt;% 
  filter(lifeExp == max(lifeExp)) %&gt;% 
  arrange(year)
asia_life_exp</code></pre>
<pre><code>## # A tibble: 33 x 6
## # Groups:   country [33]
##    country          year        pop continent lifeExp gdpPercap
##    &lt;chr&gt;           &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt;     &lt;dbl&gt;
##  1 Iraq             1987   16543189 Asia         65.0    11644.
##  2 Korea Dem. Rep.  1987   19067554 Asia         70.6     4106.
##  3 Afghanistan      2007   31889923 Asia         43.8      975.
##  4 Bahrain          2007     708573 Asia         75.6    29796.
##  5 Bangladesh       2007  150448339 Asia         64.1     1391.
##  6 Cambodia         2007   14131858 Asia         59.7     1714.
##  7 China            2007 1318683096 Asia         73.0     4959.
##  8 Hong Kong China  2007    6980412 Asia         82.2    39725.
##  9 India            2007 1110396331 Asia         64.7     2452.
## 10 Indonesia        2007  223547000 Asia         70.6     3541.
## # ... with 23 more rows</code></pre>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
